{"version":3,"file":"src_js_lib_SettingPanel_components_SearchBar_js.js","mappings":"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","sources":["webpack://template-market/./src/js/lib/SettingPanel/components/SearchBar.js"],"sourcesContent":["import { useState } from '@wordpress/element';\nimport { useSettingsState } from '../context/SettingsContext';\nimport {\n\tsanitizePath,\n\tgenerateBreadcrumb,\n\thasMathInText,\n} from '../helpers/utility';\n\nexport default function SearchBar() {\n\tconst { settingsState } = useSettingsState();\n\tconst [ searchResults, setSearchResults ] = useState( [] );\n\tconst [ keyword, setKeyword ] = useState( '' );\n\n\tfunction handleSearch( e ) {\n\t\tsetKeyword( e.target.value );\n\t\tsetSearchResults( [] );\n\n\t\tif ( ! e.target.value ) {\n\t\t\treturn;\n\t\t}\n\n\t\tprepareSearchResult( e.target.value );\n\t}\n\n\tfunction prepareSearchResult( keyword ) {\n\t\tkeyword = keyword.toLowerCase();\n\t\tsearchFields( keyword );\n\t\tsearchMenu( keyword );\n\t}\n\n\tfunction serchFieldInMenu( fieldKey, menus ) {\n\t\tfor ( const menu of menus ) {\n\t\t\tif ( 'submenu' === menu.type ) {\n\t\t\t\tconst submenu = serchFieldInMenu( fieldKey, menu.submenu );\n\n\t\t\t\tif ( submenu ) {\n\t\t\t\t\treturn submenu;\n\t\t\t\t}\n\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif ( 'menu' === menu.type ) {\n\t\t\t\tconst hasInField =\n\t\t\t\t\tmenu.fields && menu.fields.includes( fieldKey );\n\t\t\t\tlet hasInFieldGroups = false;\n\n\t\t\t\tif ( menu.fieldGroups ) {\n\t\t\t\t\tconst filteredFieldGroups = menu.fieldGroups.filter(\n\t\t\t\t\t\t( fieldGroup ) =>\n\t\t\t\t\t\t\tfieldGroup.fields &&\n\t\t\t\t\t\t\tfieldGroup.fields.includes( fieldKey )\n\t\t\t\t\t);\n\n\t\t\t\t\thasInFieldGroups = filteredFieldGroups.length;\n\t\t\t\t}\n\n\t\t\t\tif ( hasInField || hasInFieldGroups ) {\n\t\t\t\t\treturn menu;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tfunction searchFields( keyword ) {\n\t\tconst fieldKeys = Object.keys( settingsState.fields );\n\t\tfor ( const fieldKey of fieldKeys ) {\n\t\t\tif ( ! settingsState.fields[ fieldKey ].label ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst hasMatch = hasMathInText(\n\t\t\t\tkeyword,\n\t\t\t\tsettingsState.fields[ fieldKey ].label\n\t\t\t);\n\n\t\t\tif ( ! hasMatch ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst menu = serchFieldInMenu( fieldKey, settingsState.menus );\n\n\t\t\tif ( ! menu ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst path = sanitizePath(\n\t\t\t\tsettingsState.rootRoutePath + '/' + menu.path\n\t\t\t);\n\n\t\t\tconst resultItem = {\n\t\t\t\tlabel: settingsState.fields[ fieldKey ].label,\n\t\t\t\tlink: `#/${ path }?field=${ fieldKey }`,\n\t\t\t\tbreadcrumb: generateBreadcrumb( path ),\n\t\t\t};\n\n\t\t\tsetSearchResults( ( currentValue ) => {\n\t\t\t\treturn [ ...currentValue, resultItem ];\n\t\t\t} );\n\t\t}\n\t}\n\n\tfunction searchMenu( keyword ) {\n\t\tconst searchLabelInMenu = ( menus ) => {\n\t\t\tfor ( const menu of menus ) {\n\t\t\t\tif ( 'submenu' === menu.type ) {\n\t\t\t\t\tif ( hasMathInText( keyword, menu.label ) ) {\n\t\t\t\t\t\treturn menu;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst subMenu = searchLabelInMenu( menu.submenu );\n\n\t\t\t\t\tif ( subMenu ) {\n\t\t\t\t\t\treturn subMenu;\n\t\t\t\t\t}\n\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif ( 'menu' === menu.type ) {\n\t\t\t\t\tif ( hasMathInText( keyword, menu.label ) ) {\n\t\t\t\t\t\treturn menu;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn null;\n\t\t};\n\n\t\tconst menu = searchLabelInMenu( settingsState.menus );\n\n\t\tif ( ! menu ) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet path =\n\t\t\t'submenu' === menu.type && menu.grandChildPath\n\t\t\t\t? menu.grandChildPath\n\t\t\t\t: menu.path;\n\t\tpath = sanitizePath( settingsState.rootRoutePath + '/' + path );\n\n\t\tconst resultItem = {\n\t\t\tlabel: menu.label,\n\t\t\tlink: `#/${ path }`,\n\t\t\tbreadcrumb: generateBreadcrumb( path ),\n\t\t};\n\n\t\tsetSearchResults( ( currentValue ) => {\n\t\t\treturn [ ...currentValue, resultItem ];\n\t\t} );\n\t}\n\n\tfunction reset() {\n\t\tsetKeyword( '' );\n\t\tsetSearchResults( [] );\n\t}\n\n\treturn (\n\t\t<div className=\"helpgent-settings-panel-search\">\n\t\t\t<input\n\t\t\t\ttype=\"text\"\n\t\t\t\tvalue={ keyword }\n\t\t\t\tonChange={ handleSearch }\n\t\t\t\tclassName=\"helpgent-settings-panel-search-input\"\n\t\t\t\tplaceholder=\"Search settings here...\"\n\t\t\t/>\n\n\t\t\t<div className=\"helpgent-settings-panel-search-results\">\n\t\t\t\t{ searchResults.map( ( item ) => (\n\t\t\t\t\t<a\n\t\t\t\t\t\thref={ item.link }\n\t\t\t\t\t\tonClick={ reset }\n\t\t\t\t\t\tclassName=\"helpgent-settings-panel-search-result-link\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<p className=\"helpgent-settings-panel-search-result-label\">\n\t\t\t\t\t\t\t{ item.label }\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<p className=\"helpgent-settings-panel-search-result-breadcrumb\">\n\t\t\t\t\t\t\t{ item.breadcrumb }\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</a>\n\t\t\t\t) ) }\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n"],"names":["useState","useSettingsState","sanitizePath","generateBreadcrumb","hasMathInText","SearchBar","settingsState","searchResults","setSearchResults","keyword","setKeyword","handleSearch","e","target","value","prepareSearchResult","toLowerCase","searchFields","searchMenu","serchFieldInMenu","fieldKey","menus","menu","type","submenu","hasInField","fields","includes","hasInFieldGroups","fieldGroups","filteredFieldGroups","filter","fieldGroup","length","fieldKeys","Object","keys","label","hasMatch","path","rootRoutePath","resultItem","link","breadcrumb","currentValue","searchLabelInMenu","subMenu","grandChildPath","reset","createElement","className","onChange","placeholder","map","item","href","onClick"],"sourceRoot":""}