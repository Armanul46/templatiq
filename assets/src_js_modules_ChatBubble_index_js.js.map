{"version":3,"file":"src_js_modules_ChatBubble_index_js.js","mappings":";;;;;;;;;;;;;;;;;;;AAAyE;AACzE,MAAMG,sBAAsB,GAAGH,iEAAa,CAAC,CAAC;AAEvC,MAAMI,kBAAkB,GAAGA,CAAA,KAAMH,8DAAU,CAAEE,sBAAuB,CAAC;AAErE,MAAME,uBAAuB,GAAGA,CAAE;EAAEC;AAAS,CAAC,KAAM;EAC1D,MAAMC,aAAa,GAAG;IACrBC,UAAU,EAAE,IAAI;IAChBC,aAAa,EAAE,IAAI;IACnBC,cAAc,EAAE,IAAI;IACpBC,YAAY,EAAE,IAAI;IAClBC,uBAAuB,EAAE,KAAK;IAC9BC,UAAU,EAAE,GAAG;IACfC,qBAAqB,EAAE,SAAS;IAChCC,SAAS,EAAE,EAAE;IACbC,kBAAkB,EAAE,EAAE;IACtBC,oBAAoB,EAAE,EAAE;IACxBC,oBAAoB,EAAE,EAAE;IACxBC,aAAa,EAAE,IAAI;IACnBC,0BAA0B,EAAE,IAAI;IAChCC,oBAAoB,EAAE,IAAI;IAC1BC,wBAAwB,EAAE,IAAI;IAC9BC,qBAAqB,EAAE,IAAI;IAC3BC,UAAU,EAAE;MACXC,gBAAgB,EAAE,KAAK;MACvBC,mBAAmB,EAAE,KAAK;MAC1BC,gBAAgB,EAAE;IACnB,CAAC;IACDC,aAAa,EAAE;EAChB,CAAC;EACD,MAAM,CAAEC,eAAe,EAAEC,kBAAkB,CAAE,GAAG5B,4DAAQ,CAAEK,aAAc,CAAC;EAEzE,OACCwB,oDAAA,CAAC5B,sBAAsB,CAAC6B,QAAQ;IAC/BC,KAAK,EAAG;MAAEJ,eAAe;MAAEC;IAAmB;EAAG,GAE/CxB,QAC8B,CAAC;AAEpC,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;ACvC8D;AACO;AACL;AACT;AACR;AAChD,MAAMiC,QAAQ,GAAGL,wDAAI,CAAE,MAAM,iKAAiC,CAAC;AACH;AACL;AACb;AAC8B;AAExE,MAAMW,gBAAgB,GAAKC,KAAK,IAAM;EACrC,MAAM;IAAEC,IAAI;IAAElC,UAAU;IAAEmC;EAAe,CAAC,GAAGF,KAAK;EAClD,MAAM;IAAEjB,eAAe;IAAEC;EAAmB,CAAC,GAAG1B,8EAAkB,CAAC,CAAC;EACpE,MAAM;IAAEI;EAAW,CAAC,GAAGqB,eAAe;EAEtC,MAAM;IAAEoB;EAAU,CAAC,GAAGC,IAAI,CAACC,KAAK,CAAED,IAAI,CAACC,KAAK,CAAEJ,IAAK,CAAC,CAACK,OAAQ,CAAC;EAC9D,MAAM;IAAEC;EAAO,CAAC,GAAGH,IAAI,CAACC,KAAK,CAAED,IAAI,CAACC,KAAK,CAAEJ,IAAK,CAAC,CAACK,OAAQ,CAAC;EAC3D,MAAM;IAAEE;EAAO,CAAC,GAAGD,MAAM;EACzB,MAAM;IAAEE,QAAQ;IAAEC,QAAQ;IAAEC;EAAS,CAAC,GAAGH,MAAM;EAC/C,MAAMI,gBAAgB,GAAG;IACxB,kCAAkC,EAAG,GAAGH,QAAU,IAAG;IACrD,kCAAkC,EAAG,GAAGC,QAAU;EACnD,CAAC;EACDrB,6DAAS,CAAE,MAAM;IAChB,IAAIzB,cAAc,GAAGuC,SAAS,CAACU,IAAI,CAAE,CAAEC,IAAI,EAAEC,KAAK,KAAM;MACvD,IAAKD,IAAI,CAACE,aAAa,KAAK,SAAS,EAAG;QACvC,OAAO,IAAI;MACZ,CAAC,MAAM,IAAKjD,UAAU,KAAK,GAAG,IAAIgD,KAAK,KAAK,CAAC,EAAG;QAC/C,OAAO,IAAI;MACZ,CAAC,MAAM,IAAKD,IAAI,CAACE,aAAa,KAAK,iBAAiB,EAAG;QACtD,OAAO,IAAI;MACZ;MACA,OAAO,KAAK;IACb,CAAE,CAAC;IAEHhC,kBAAkB,CAAE;MACnB,GAAGD,eAAe;MAClBrB,UAAU,EAAE0C,IAAI,CAACC,KAAK,CAAEJ,IAAK,CAAC;MAC9BrC,cAAc,EAAEA,cAAc;MAC9BG,UAAU,EAAEA,UAAU;MACtBJ,aAAa,EAAE,IAAI;MACnBE,YAAY,EAAE,IAAI;MAClBC,uBAAuB,EAAE,KAAK;MAC9BE,qBAAqB,EAAE,SAAS;MAChCC,SAAS,EAAE,EAAE;MACbC,kBAAkB,EAAE,EAAE;MACtBC,oBAAoB,EAAE,EAAE;MACxBC,oBAAoB,EAAE,EAAE;MACxBC,aAAa,EAAE,IAAI;MACnBC,0BAA0B,EAAE,IAAI;MAChCC,oBAAoB,EAAE,IAAI;MAC1BC,wBAAwB,EAAE,IAAI;MAC9BC,qBAAqB,EAAE;IACxB,CAAE,CAAC;IACH,IAAKwC,MAAM,CAACC,oBAAoB,EAAG;MAClCD,MAAM,CAACC,oBAAoB,GAAG,CAAC,CAAC;IACjC;EACD,CAAC,EAAE,CAAEnC,eAAe,EAAEL,UAAU,EAAEC,gBAAgB,CAAG,CAAC;EAEtD,OACCjB,UAAU,IACVA,UAAU,CAACyD,cAAc,KAAK,GAAG,IAChClC,oDAAA,CAACa,4DAAwB,QACtBf,eAAe,CAACL,UAAU,CAACC,gBAAgB,IAC5CM,oDAAA;IACCmC,KAAK,EAAG;MACPC,OAAO,EAAEtC,eAAe,CAACL,UAAU,CACjCE,mBAAmB,GAClB,MAAM,GACN;IACJ;EAAG,GAEHK,oDAAA,CAACY,uDAAmB;IACnByB,SAAS,EAAI,0DAA0DX,QAAU,EAAG;IACpFS,KAAK,EAAGR;EAAkB,GAE1B3B,oDAAA,CAACQ,QAAQ;IACR8B,WAAW,EAAGxC,eAAiB;IAC/ByC,cAAc,EAAGxC,kBAAoB;IACrCkB,cAAc,EAAGA;EAAgB,CACjC,CACmB,CACjB,CACL,EAEC,CAAE,CAAEnB,eAAe,CAACL,UAAU,CAACC,gBAAgB,IAChDI,eAAe,CAACL,UAAU,CAACE,mBAAmB,KAC9CK,oDAAA,CAACO,qJAAU;IACViC,cAAc,EAAGjB,MAAQ;IACzBe,WAAW,EAAGxC,eAAiB;IAC/ByC,cAAc,EAAGxC,kBAAoB;IACrC0C,kBAAkB;EAAA,CAClB,CAEuB,CAC1B;AAEH,CAAC;AAEc,SAASC,gBAAgBA,CAAE3B,KAAK,EAAG;EACjD,OACCf,oDAAA,CAACS,sEAAmB;IAACkC,MAAM,EAAGhC,mDAAUA;EAAE,GACzCX,oDAAA,CAAC1B,+EAAuB,QACvB0B,oDAAA,CAACc,gBAAgB;IAAA,GAAMC;EAAK,CAAI,CACR,CACL,CAAC;AAExB;;;;;;;;;;;;;;;;AC5GuC;AAEvC,MAAMH,mBAAmB,GAAGgC,yDAAM,CAACC,GAAI;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAED,MAAMhC,wBAAwB,GAAG+B,yDAAM,CAACC,GAAI;AAC5C;AACA;AACA;AACA,CAAC","sources":["webpack://template-market/./src/js/modules/ChatBubble/context/ChatBubbleContext.js","webpack://template-market/./src/js/modules/ChatBubble/index.js","webpack://template-market/./src/js/modules/ChatBubble/style.js"],"sourcesContent":["import { createContext, useContext, useState } from '@wordpress/element';\nconst ChatBubbleStateContent = createContext();\n\nexport const useChatBubbleState = () => useContext( ChatBubbleStateContent );\n\nexport const ChatBubbleStateProvider = ( { children } ) => {\n\tconst chatBubbleObj = {\n\t\tsingleForm: null,\n\t\testimatedTime: null,\n\t\tactiveQuestion: null,\n\t\tnextQuestion: null,\n\t\tisFinalSubmissionActive: false,\n\t\tisLoggedIn: '1',\n\t\tuserVerificationField: 'default',\n\t\tuserEmail: '',\n\t\tsubmittedQuestions: [],\n\t\treWatchedQuestionIds: [],\n\t\tcachedQuestionsValue: [],\n\t\tresponseToken: null,\n\t\tisProcessingSubmitCallback: null,\n\t\tbeforeSubmitCallback: null,\n\t\tbeforeSubmitCallbackArgs: null,\n\t\tsubmissionServerError: null,\n\t\tchatBubble: {\n\t\t\tisChatFormActive: false,\n\t\t\tisChatFormMinimized: false,\n\t\t\tcanCloseChatForm: true,\n\t\t},\n\t\tchatFormClose: null,\n\t};\n\tconst [ chatBubbleState, setChatBubbleState ] = useState( chatBubbleObj );\n\n\treturn (\n\t\t<ChatBubbleStateContent.Provider\n\t\t\tvalue={ { chatBubbleState, setChatBubbleState } }\n\t\t>\n\t\t\t{ children }\n\t\t</ChatBubbleStateContent.Provider>\n\t);\n};\n","import { lazy, useEffect, Suspense } from '@wordpress/element';\nimport { ChatBubbleStateProvider } from './context/ChatBubbleContext';\nimport { useChatBubbleState } from './context/ChatBubbleContext';\nimport ContentLoading from '@components/ContentLoading';\nimport ChatBubble from '@components/ChatBubble';\nconst ChatForm = lazy( () => import( '@components/ChatForm' ) );\nimport { QueryClientProvider } from '@tanstack/react-query';\nimport { useQueryClient } from '@tanstack/react-query';\nimport queryStore from '../../queryStore';\nimport { ChatBubbleFormStyle, ChatBubbleContainerStyle } from './style';\n\nconst ChatBubbleCircle = ( props ) => {\n\tconst { data, isLoggedIn, isFloatingForm } = props;\n\tconst { chatBubbleState, setChatBubbleState } = useChatBubbleState();\n\tconst { singleForm } = chatBubbleState;\n\n\tconst { questions } = JSON.parse( JSON.parse( data ).content );\n\tconst { global } = JSON.parse( JSON.parse( data ).content );\n\tconst { bubble } = global;\n\tconst { offset_x, offset_y, position } = bubble;\n\tconst bubbleFormStyles = {\n\t\t'--templatiq-bubble-form-offset-x': `${ offset_x }px`,\n\t\t'--templatiq-bubble-form-offset-y': `${ offset_y }px`,\n\t};\n\tuseEffect( () => {\n\t\tlet activeQuestion = questions.find( ( item, index ) => {\n\t\t\tif ( item.question_type === 'welcome' ) {\n\t\t\t\treturn true;\n\t\t\t} else if ( isLoggedIn === '1' && index === 0 ) {\n\t\t\t\treturn true;\n\t\t\t} else if ( item.question_type === 'user_validation' ) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t} );\n\n\t\tsetChatBubbleState( {\n\t\t\t...chatBubbleState,\n\t\t\tsingleForm: JSON.parse( data ),\n\t\t\tactiveQuestion: activeQuestion,\n\t\t\tisLoggedIn: isLoggedIn,\n\t\t\testimatedTime: null,\n\t\t\tnextQuestion: null,\n\t\t\tisFinalSubmissionActive: false,\n\t\t\tuserVerificationField: 'default',\n\t\t\tuserEmail: '',\n\t\t\tsubmittedQuestions: [],\n\t\t\treWatchedQuestionIds: [],\n\t\t\tcachedQuestionsValue: [],\n\t\t\tresponseToken: null,\n\t\t\tisProcessingSubmitCallback: null,\n\t\t\tbeforeSubmitCallback: null,\n\t\t\tbeforeSubmitCallbackArgs: null,\n\t\t\tsubmissionServerError: null,\n\t\t} );\n\t\tif ( window.templatiqGlobalState ) {\n\t\t\twindow.templatiqGlobalState = {};\n\t\t}\n\t}, [ chatBubbleState?.chatBubble?.isChatFormActive ] );\n\n\treturn (\n\t\tsingleForm &&\n\t\tsingleForm.is_chat_bubble === '1' && (\n\t\t\t<ChatBubbleContainerStyle>\n\t\t\t\t{ chatBubbleState.chatBubble.isChatFormActive && (\n\t\t\t\t\t<div\n\t\t\t\t\t\tstyle={ {\n\t\t\t\t\t\t\tdisplay: chatBubbleState.chatBubble\n\t\t\t\t\t\t\t\t.isChatFormMinimized\n\t\t\t\t\t\t\t\t? 'none'\n\t\t\t\t\t\t\t\t: 'block',\n\t\t\t\t\t\t} }\n\t\t\t\t\t>\n\t\t\t\t\t\t<ChatBubbleFormStyle\n\t\t\t\t\t\t\tclassName={ `templatiq-chat-bubble-form templatiq-chat-bubble-form--${ position }` }\n\t\t\t\t\t\t\tstyle={ bubbleFormStyles }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<ChatForm\n\t\t\t\t\t\t\t\tmoduleState={ chatBubbleState }\n\t\t\t\t\t\t\t\tsetModuleState={ setChatBubbleState }\n\t\t\t\t\t\t\t\tisFloatingForm={ isFloatingForm }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</ChatBubbleFormStyle>\n\t\t\t\t\t</div>\n\t\t\t\t) }\n\n\t\t\t\t{ ( ! chatBubbleState.chatBubble.isChatFormActive ||\n\t\t\t\t\tchatBubbleState.chatBubble.isChatFormMinimized ) && (\n\t\t\t\t\t<ChatBubble\n\t\t\t\t\t\tbubbleSettings={ bubble }\n\t\t\t\t\t\tmoduleState={ chatBubbleState }\n\t\t\t\t\t\tsetModuleState={ setChatBubbleState }\n\t\t\t\t\t\tisClientModeActive\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t</ChatBubbleContainerStyle>\n\t\t)\n\t);\n};\n\nexport default function ChatBubbleModule( props ) {\n\treturn (\n\t\t<QueryClientProvider client={ queryStore }>\n\t\t\t<ChatBubbleStateProvider>\n\t\t\t\t<ChatBubbleCircle { ...props } />\n\t\t\t</ChatBubbleStateProvider>\n\t\t</QueryClientProvider>\n\t);\n}\n","import Styled from 'styled-components';\n\nconst ChatBubbleFormStyle = Styled.div`\n    position: fixed;\n    max-width: 800px;\n    width: 100%;\n    bottom: var(--templatiq-bubble-form-offset-y);\n    height: min(80vh, 550px);\n    z-index: 9999;\n    animation: 0.4s ease-in-out 0s 1 normal none running templatiqOpeningAnimation;\n    @media only screen and (max-width: 991px){\n        max-width: 700px;\n    }\n    @media only screen and (max-width: 768px){\n        width: calc(100% - 60px);\n        height: unset;\n    }\n     &.templatiq-chat-bubble-form{\n        position: fixed;\n        &--left{\n            left: var(--templatiq-bubble-form-offset-x);\n        }\n        &--right{\n            right: var(--templatiq-bubble-form-offset-x);\n        }\n        .templatiq-preview-container{\n            overflow: unset;\n        }\n        .templatiq-preview-media-right{\n            .templatiq-question-element-wrapper{\n                padding-left: 40px;\n            }\n            .templatiq-media-src__image .templatiq-media-src__overlay{\n                border-radius: 0 20px 20px 0;\n            }\n            .templatiq-countdown{\n                border-radius: 0;\n            }\n        }\n        .templatiq-media-src__image .templatiq-media-src__overlay{\n            border-radius: 20px 0 0 20px;\n        }\n\n    }\n`;\n\nconst ChatBubbleContainerStyle = Styled.div`\n    .templatiq-chat-bubble{\n        position: fixed;\n    }\n`;\n\nexport { ChatBubbleFormStyle, ChatBubbleContainerStyle };\n"],"names":["createContext","useContext","useState","ChatBubbleStateContent","useChatBubbleState","ChatBubbleStateProvider","children","chatBubbleObj","singleForm","estimatedTime","activeQuestion","nextQuestion","isFinalSubmissionActive","isLoggedIn","userVerificationField","userEmail","submittedQuestions","reWatchedQuestionIds","cachedQuestionsValue","responseToken","isProcessingSubmitCallback","beforeSubmitCallback","beforeSubmitCallbackArgs","submissionServerError","chatBubble","isChatFormActive","isChatFormMinimized","canCloseChatForm","chatFormClose","chatBubbleState","setChatBubbleState","createElement","Provider","value","lazy","useEffect","Suspense","ContentLoading","ChatBubble","ChatForm","QueryClientProvider","useQueryClient","queryStore","ChatBubbleFormStyle","ChatBubbleContainerStyle","ChatBubbleCircle","props","data","isFloatingForm","questions","JSON","parse","content","global","bubble","offset_x","offset_y","position","bubbleFormStyles","find","item","index","question_type","window","templatiqGlobalState","is_chat_bubble","style","display","className","moduleState","setModuleState","bubbleSettings","isClientModeActive","ChatBubbleModule","client","Styled","div"],"sourceRoot":""}